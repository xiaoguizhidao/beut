Element.addMethods({center:function(d,a,f,g,h){d=$(d);var c=d.getDimensions(),e={},b={};a?(e=$(a).getDimensions(),b=$(a).cumulativeOffset()):(e=document.viewport.getDimensions(),b=document.viewport.getScrollOffsets());$(h)&&(a=$(h).cumulativeOffset(),b[0]-=a[0],b[1]-=a[1]);a=e.width/2+b[0]-c.width/2;c=e.height/2+b[1]-c.height/2;f&&a<f&&(a=parseInt(f));g&&c<g&&(c=parseInt(g));d.setStyle({position:"absolute",top:Math.floor(c)+"px",left:Math.floor(a)+"px"});return d}});